## 文本分类实验

### LSTM

| bs   | lr   | hidden_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 128  | 1e-1 | 128         | 10    | avg           | 0.047 | 2s           |
| 128  | 1e-3 | 128         | 10    | avg           | 0.483 | 2s           |
| 128  | 1e-5 | 128         | 10    | avg           | 0.05  | 2s           |

| bs   | lr   | hidden_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 32   | 1e-3 | 128         | 10    | avg           | 0.069 | 4s           |
| 64   | 1e-3 | 128         | 10    | avg           | 0.311 | 2s           |
| 128  | 1e-3 | 128         | 10    | avg           | 0.444 | 1s           |

| bs   | lr   | hidden_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 128  | 1e-3 | 64          | 10    | avg           | 0.341 | 2.919s       |
| 128  | 1e-3 | 128         | 10    | avg           | 0.525 | 1.007s       |
| 128  | 1e-3 | 256         | 10    | avg           | 0.625 | 2.415s       |

| bs   | lr   | hidden_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 128  | 1e-3 | 256         | 10    | max           | 0.566 | 4.026s       |
| 128  | 1e-3 | 256         | 10    | avg           | 0.625 | 2.017s       |

LSTM模型bs越大，hidden_size越大效果越好，但是LR不能设置过大或者过小。

### CNN

| bs   | lr   | kernel_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 128  | 1e-3 | 64          | 10    | avg           | 0.597 | 3.575s       |
| 128  | 1e-3 | 128         | 10    | avg           | 0.613 | 1.025s       |
| 128  | 1e-3 | 256         | 10    | avg           | 0.563 | 2.390s       |

| bs   | lr   | kernel_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 128  | 1e-3 | 128         | 10    | avg           | 0.605 | 3.887s       |
| 128  | 1e-3 | 128         | 10    | max           | 0.619 | 1.015s       |

CNN模型kernel_size越大效果越好，但可能由于数据量不大，时间优势相比LSTM体现不出来



### BERT

| bs   | lr   | hidden_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 32   | 1e-1 | 768         | 10    | CLS           | 0.06  | 47.77s       |
| 32   | 1e-3 | 768         | 10    | CLS           | 0.05  | 41.53s       |
| 32   | 1e-5 | 768         | 10    | CLS           | 0.847 | 41.73s       |

| bs   | lr   | hidden_size | epoch | pooling_style | acc   | time/10epoch |
| ---- | ---- | ----------- | ----- | ------------- | ----- | ------------ |
| 8    | 1e-1 | 768         | 10    | CLS           | 0.866 | 110.53s      |
| 16   | 1e-3 | 768         | 10    | CLS           | 0.872 | 61.24s       |
| 32   | 1e-5 | 768         | 10    | CLS           | 0.847 | 41.78s       |

BERT模型的LR需要控制在很小的范围内，太大的LR会导致模型不收敛。BERT模型的效果最好，但同时训练的时间也最长。BS的设置不一定越大越好，需要经过实验。